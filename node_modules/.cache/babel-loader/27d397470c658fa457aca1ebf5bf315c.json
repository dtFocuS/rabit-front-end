{"ast":null,"code":"var _jsxFileName = \"/Users/dannytseng/Development/mod4/rabit-front-end/rabit-client/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport '../index.css';\nimport SignupForm from './modals/SignupForm';\nimport { BrowserRouter as Route, withRouter } from 'react-router-dom';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signupModalShow: false\n    };\n\n    this.login = ev => {\n      ev.preventDefault();\n      let username = this.username.current.value;\n      let password = this.password.current.value;\n      fetch('http://localhost:3000/api/v1/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: {\n            username,\n            password\n          }\n        })\n      }).then(res => res.json()).then(json => {\n        console.log('login:', json);\n\n        if (json && json.jwt) {\n          this.saveToken(json.jwt);\n          this.props.getUser();\n        }\n      }).then(() => {\n        this.props.history.push('/');\n      });\n    };\n\n    this.logout = () => {\n      this.clearToken();\n      window.location.reload();\n    };\n\n    this.username = React.createRef();\n    this.password = React.createRef();\n  }\n\n  saveToken(jwt) {\n    localStorage.setItem('jwt', jwt);\n  }\n\n  clearToken(jwt) {\n    localStorage.setItem('jwt', '');\n  }\n\n  loginForm() {\n    let signupModalClose = () => this.setState({\n      signupModalShow: false\n    });\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"border-top-0 border-right-0 border-left-0\",\n      id: \"username-entry\",\n      type: \"text\",\n      placeholder: \"username\",\n      ref: this.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"border-top-0 border-right-0 border-left-0\",\n      id: \"password-entry\",\n      type: \"password\",\n      placeholder: \"password\",\n      ref: this.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"submit-button\",\n      type: \"submit\",\n      value: \"log in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"sign-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Don't have an account? \", React.createElement(\"span\", {\n      id: \"sign-up-button\",\n      onClick: () => this.setState({\n        signupModalShow: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Sign Up\")), React.createElement(SignupForm, {\n      show: this.state.signupModalShow,\n      onHide: signupModalClose,\n      getUser: this.props.getUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    })));\n  }\n\n  logoutArea() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"logged-in-username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.props.user && \"@\" + this.props.user.username || null), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), this.props.user ? React.createElement(\"button\", {\n      id: \"logout-button\",\n      type: \"button\",\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"log out\") : null);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.props.user ? this.logoutArea() : this.loginForm());\n  }\n\n}\n\n;\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/dannytseng/Development/mod4/rabit-front-end/rabit-client/src/components/Login.js"],"names":["React","Component","SignupForm","BrowserRouter","Route","withRouter","Login","constructor","props","state","signupModalShow","login","ev","preventDefault","username","current","value","password","fetch","method","headers","body","JSON","stringify","user","then","res","json","console","log","jwt","saveToken","getUser","history","push","logout","clearToken","window","location","reload","createRef","localStorage","setItem","loginForm","signupModalClose","setState","logoutArea","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../index.css';\nimport SignupForm from './modals/SignupForm';\n\nimport { BrowserRouter as Route, withRouter } from 'react-router-dom';\n\nclass Login extends Component {\n\n\tstate = {\n\t\tsignupModalShow: false\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.username = React.createRef()\n\t\tthis.password = React.createRef()\n\t}\n\n\n\tlogin = (ev) => {\n\t\tev.preventDefault()\n\n\t\tlet username = this.username.current.value\n\t\tlet password = this.password.current.value\n\n\t\tfetch('http://localhost:3000/api/v1/login', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({ user: { username, password } })\n\t\t})\n\t\t.then(res => res.json())\n\t\t.then(json => {\n\t\t\tconsole.log('login:', json)\n\t\t\tif (json && json.jwt) {\n\t\t\t\tthis.saveToken(json.jwt)\n\t\t\t\tthis.props.getUser()\n\t\t\t}\n\t\t})\n\t\t.then(() => {\n\t\t\tthis.props.history.push('/')\n\t\t})\n\t}\n\n\tlogout = () => {\n\t\tthis.clearToken();\n\t\twindow.location.reload();\n\t}\n\n\n\n\tsaveToken(jwt) {\n\t\tlocalStorage.setItem('jwt', jwt)\n\t}\n\n\tclearToken(jwt) {\n\t\tlocalStorage.setItem('jwt', '')\n\t}\n\n\n\n\tloginForm() {\n\t\tlet signupModalClose = () => this.setState({ signupModalShow: false });\n\t\treturn <div>\n\n\t\t\t<form onSubmit={this.login}>\n\t\t\t\t<input className=\"border-top-0 border-right-0 border-left-0\"id=\"username-entry\" type=\"text\" placeholder=\"username\" ref={this.username} /><br/><br/>\n\t\t\t\t<input className=\"border-top-0 border-right-0 border-left-0\" id=\"password-entry\" type=\"password\" placeholder=\"password\" ref={this.password} /><br/><br/>\n\t\t\t\t<input id=\"submit-button\" type=\"submit\" value=\"log in\" /><br/>\n\t\t\t</form><br/>\n\n\t\t\t<div id=\"sign-up\">\n\t\t\t\t\t<p>Don't have an account? <span id=\"sign-up-button\" onClick={() => this.setState({ signupModalShow: true })}>Sign Up</span></p>\n\t\t\t\t\t<SignupForm\n\t\t\t\t\t\tshow={this.state.signupModalShow}\n\t\t\t\t\t\tonHide={signupModalClose}\n\t\t\t\t\t\tgetUser={this.props.getUser}\n\t\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t}\n\n\tlogoutArea() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div id=\"logged-in-username\">\n\t\t\t\t\t{this.props.user && \"@\" + this.props.user.username || null}\n\t\t\t\t</div>\n\n\t\t\t\t<br/>\n\t\t\t\t{this.props.user ? <button id=\"logout-button\" type=\"button\" onClick={this.logout}>log out</button> : null}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t \t<div className=\"App\">\n\t\t\t\t{this.props.user ? this.logoutArea() : this.loginForm()}\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}