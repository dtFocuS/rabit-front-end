{"ast":null,"code":"import _objectSpread from \"/Users/dannytseng/Development/mod4/rabit-front-end/rabit-client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/dannytseng/Development/mod4/rabit-front-end/rabit-client/src/containers/App.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport Header from '../components/Header';\nimport Home from '../components/Home';\nimport Login from '../components/Login';\nimport Account from '../components/Account'; // import * as serviceWorker from './serviceWorker';\n\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nclass App extends Component {\n  // constructor() {\n  //     super();\n  //     this.state = {\n  //         user_id: null,\n  //         user: null\n  //     }\n  // }\n  // getCurrentUser = (userInfo) => {\n  //     console.log(userInfo.user.id)\n  //     this.setState({\n  //         user_id: userInfo.user.id,\n  //         user: userInfo.user\n  //     }, () => {console.log(this.state.user_id)})\n  // }\n  // getUserToken = () => {\n  //     return localStorage.getItem('jwt');\n  // }\n  constructor() {\n    super();\n    this.state = {\n      user: null,\n      username: null\n    };\n\n    this.getProfile = () => {\n      let token = this.getToken();\n      fetch('http://localhost:3000/api/v1/profile', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(res => res.json()).then(json => {\n        console.log('profile:', json);\n        this.setState({\n          user: json.user\n        });\n      });\n    };\n\n    this.handleCreate = newUser => {\n      fetch('http://localhost:3000/api/v1/users', {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: _objectSpread({}, newUser)\n        })\n      }).then(resp => resp.json()).then(json => {\n        this.setState({\n          user: json.user\n        });\n      });\n    };\n\n    this.username = React.createRef();\n    this.password = React.createRef();\n\n    if (this.getToken()) {\n      this.getProfile();\n    }\n\n    this.logout = this.logout.bind(this);\n  } // login = (event) => {\n  //     event.preventDefault()\n  //     console.log('log in')\n  //     let username = event.target[0].value\n  //     let password = event.target[1].value\n  //     fetch('http://localhost:3000/api/v1/login', {\n  //         method: 'POST',\n  //         headers: {\n  //             'Content-Type': 'application/json'\n  //         },\n  //         body: JSON.stringify({ user: { username, password } })\n  //     })\n  //         .then(res => res.json())\n  //         .then(json => {\n  //             console.log('login:', json)\n  //             if (json && json.jwt) {\n  //                 this.saveToken(json.jwt)\n  //                 this.getProfile()\n  //             }\n  //         })\n  //         .then(() => {\n  //             this.props.history.push('/')\n  //         })\n  // }\n\n\n  logout() {\n    this.clearToken();\n    this.setState({\n      user: null\n    });\n  }\n\n  saveToken(jwt) {\n    localStorage.setItem('jwt', jwt);\n  }\n\n  clearToken(jwt) {\n    localStorage.setItem('jwt', '');\n  }\n\n  getToken(jwt) {\n    return localStorage.getItem('jwt');\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: routerProps => React.createElement(Home, Object.assign({}, routerProps, {\n        currentUserToken: this.getUserToken,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: routerProps => React.createElement(Login, Object.assign({}, routerProps, {\n        onLogin: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/account\",\n      component: Account,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/dannytseng/Development/mod4/rabit-front-end/rabit-client/src/containers/App.js"],"names":["React","Component","Header","Home","Login","Account","BrowserRouter","Router","Route","App","constructor","state","user","username","getProfile","token","getToken","fetch","headers","then","res","json","console","log","setState","handleCreate","newUser","method","body","JSON","stringify","resp","createRef","password","logout","bind","clearToken","saveToken","jwt","localStorage","setItem","getItem","render","routerProps","getUserToken","login"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport Header from '../components/Header'\n\nimport Home from '../components/Home';\nimport Login from '../components/Login';\nimport Account from '../components/Account';\n\n// import * as serviceWorker from './serviceWorker';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\n\nclass App extends Component {\n\n    // constructor() {\n    //     super();\n    //     this.state = {\n    //         user_id: null,\n    //         user: null\n    //     }\n    // }\n\n    // getCurrentUser = (userInfo) => {\n    //     console.log(userInfo.user.id)\n    //     this.setState({\n    //         user_id: userInfo.user.id,\n    //         user: userInfo.user\n    //     }, () => {console.log(this.state.user_id)})\n    // }\n\n    // getUserToken = () => {\n    //     return localStorage.getItem('jwt');\n    // }\n\n    state = {\n        user: null,\n        username: null\n    }\n\n    constructor() {\n        super()\n        this.username = React.createRef()\n        this.password = React.createRef()\n\n        if (this.getToken()) {\n            this.getProfile()\n        }\n\n        this.logout = this.logout.bind(this)\n    }\n\n    // login = (event) => {\n    //     event.preventDefault()\n    //     console.log('log in')\n    //     let username = event.target[0].value\n    //     let password = event.target[1].value\n\n    //     fetch('http://localhost:3000/api/v1/login', {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //         },\n    //         body: JSON.stringify({ user: { username, password } })\n    //     })\n    //         .then(res => res.json())\n    //         .then(json => {\n    //             console.log('login:', json)\n    //             if (json && json.jwt) {\n    //                 this.saveToken(json.jwt)\n    //                 this.getProfile()\n    //             }\n    //         })\n    //         .then(() => {\n    //             this.props.history.push('/')\n    //         })\n    // }\n\n    logout() {\n        this.clearToken();\n        this.setState({ user: null })\n    }\n\n    getProfile = () => {\n        let token = this.getToken()\n        fetch('http://localhost:3000/api/v1/profile', {\n            headers: {\n                'Authorization': 'Bearer ' + token\n            }\n        })\n            .then(res => res.json())\n            .then(json => {\n                console.log('profile:', json)\n                this.setState({ user: json.user })\n            })\n    }\n\n    saveToken(jwt) {\n        localStorage.setItem('jwt', jwt)\n    }\n\n    clearToken(jwt) {\n        localStorage.setItem('jwt', '')\n    }\n\n    getToken(jwt) {\n        return localStorage.getItem('jwt')\n    }\n\n    handleCreate = (newUser) => {\n        fetch('http://localhost:3000/api/v1/users', {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ user: { ...newUser } })\n        })\n            .then(resp => resp.json())\n            .then(json => { this.setState({ user: json.user }) })\n\n    }\n\n    render() {\n\n        return(\n            <Router>\n                <React.Fragment>\n                    <Header />\n                    <Route exact path=\"/\" render={routerProps => <Home {...routerProps} currentUserToken={this.getUserToken}/>} />\n                    <Route exact path=\"/login\" render={routerProps => <Login {...routerProps} onLogin={this.login}/>} />\n                    <Route exact path=\"/account\" component={Account} />\n                </React.Fragment>\n            </Router>\n\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}