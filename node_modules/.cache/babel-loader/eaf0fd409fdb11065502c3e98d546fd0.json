{"ast":null,"code":"var _jsxFileName = \"/Users/dannytseng/Development/mod4/rabit-front-end/src/components/modals/SignupForm.js\";\nimport React, { Component } from 'react';\nimport { Modal, Button, InputGroup, FormControl, Form, Row, Col } from 'react-bootstrap';\nimport { BrowserRouter as Route, withRouter } from 'react-router-dom';\n\nclass SignupForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.createUser = () => {\n      fetch('http://localhost:3000/api/v1/users', {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: {\n            name: this.state.name,\n            username: this.state.username,\n            password: this.state.password,\n            address: this.state.address,\n            city: this.state.city,\n            state: this.state.state,\n            zip_code: this.state.zip_code\n          }\n        })\n      }).then(resp => resp.json()).then(json => {\n        this.setState({\n          user: json.user\n        }, () => {\n          this.loginNewUser();\n        });\n      });\n    };\n\n    this.loginNewUser = () => {\n      let username = this.state.username;\n      let password = this.state.password;\n      console.log(username);\n      console.log(password);\n      fetch('http://localhost:3000/api/v1/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: {\n            username,\n            password\n          }\n        })\n      }).then(res => res.json()).then(json => {\n        if (json && json.jwt) {\n          this.saveToken(json.jwt);\n          this.props.getUser();\n        }\n      }).then(() => {\n        this.props.history.push('/');\n      });\n    };\n\n    this.handleSubmit = ev => {\n      ev.preventDefault();\n\n      if (!ev.target.checkValidity() || this.state.confirm !== this.state.password) {\n        this.setState({\n          displayErrors: true\n        });\n        return;\n      } else {\n        this.setState({\n          displayErrors: false\n        });\n        this.props.onHide();\n        this.createUser(this.state);\n      }\n    };\n\n    this.handleChange = ev => {\n      this.setState({\n        [ev.target.id]: ev.target.value\n      });\n    };\n\n    this.username = React.createRef();\n    this.password = React.createRef();\n    this.state = {\n      name: \"\",\n      username: \"\",\n      password: \"\",\n      confirm: \"\",\n      address: \"\",\n      city: \"\",\n      state: \"\",\n      zip_code: \"\",\n      valid: false\n    };\n  }\n\n  getToken(jwt) {\n    return localStorage.getItem('jwt');\n  }\n\n  saveToken(jwt) {\n    localStorage.setItem('jwt', jwt);\n  }\n\n  render() {\n    const displayErrors = this.state.displayErrors;\n    return React.createElement(Modal, Object.assign({}, this.props, {\n      size: \"md\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      id: \"contained-modal-title-vcenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Create Account\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      className: displayErrors ? 'displayErrors' : '',\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(InputGroup.Prepend, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(InputGroup.Text, {\n      id: \"basic-addon1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \" \")), React.createElement(FormControl, {\n      type: \"text\",\n      id: \"name\",\n      placeholder: \"Name\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(InputGroup.Prepend, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(InputGroup.Text, {\n      id: \"basic-addon1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"@\")), React.createElement(FormControl, {\n      type: \"text\",\n      id: \"username\",\n      placeholder: \"username\",\n      required: true,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      placeholder: \"Password\",\n      type: \"password\",\n      id: \"password\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      type: \"password\",\n      id: \"confirm\",\n      placeholder: \"Confirm\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })))), React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      id: \"address\",\n      placeholder: \"Address\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      id: \"city\",\n      placeholder: \"City\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      id: \"state\",\n      placeholder: \"State\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      id: \"zip_code\",\n      placeholder: \"Zip Code\",\n      onChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    })))), React.createElement(Button, {\n      type: \"submit\",\n      className: \"modal-buttons\",\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Create Account\"))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(SignupForm);","map":{"version":3,"sources":["/Users/dannytseng/Development/mod4/rabit-front-end/src/components/modals/SignupForm.js"],"names":["React","Component","Modal","Button","InputGroup","FormControl","Form","Row","Col","BrowserRouter","Route","withRouter","SignupForm","constructor","props","createUser","fetch","method","headers","body","JSON","stringify","user","name","state","username","password","address","city","zip_code","then","resp","json","setState","loginNewUser","console","log","res","jwt","saveToken","getUser","history","push","handleSubmit","ev","preventDefault","target","checkValidity","confirm","displayErrors","onHide","handleChange","id","value","createRef","valid","getToken","localStorage","getItem","setItem","render","handleClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Modal, Button,InputGroup, FormControl, Form, Row, Col } from 'react-bootstrap';\nimport { BrowserRouter as Route, withRouter } from 'react-router-dom';\n\n\nclass SignupForm extends Component {\n\n    constructor(props) {\n        super(props);\n        this.username = React.createRef()\n    \t\tthis.password = React.createRef()\n        this.state = {\n            name: \"\",\n            username: \"\",\n            password: \"\",\n            confirm: \"\",\n            address: \"\",\n            city: \"\",\n            state: \"\",\n            zip_code: \"\",\n            valid: false\n        }\n    }\n\n    getToken(jwt) {\n        return localStorage.getItem('jwt')\n    }\n\n    saveToken(jwt) {\n        localStorage.setItem('jwt', jwt)\n    }\n\n\n    createUser = () => {\n      fetch('http://localhost:3000/api/v1/users', {\n          method: \"POST\",\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify( {\n            user: {\n              name: this.state.name,\n              username: this.state.username,\n              password: this.state.password,\n              address: this.state.address,\n              city: this.state.city,\n              state: this.state.state,\n              zip_code: this.state.zip_code\n            }\n          }\n        )\n      })\n      .then(resp => resp.json())\n      .then(json => {\n        this.setState({ user: json.user }, () => {\n          this.loginNewUser()\n        })\n      })\n    }\n\n    loginNewUser = () => {\n        let username = this.state.username;\n        let password = this.state.password;\n        console.log(username);\n        console.log(password);\n        fetch('http://localhost:3000/api/v1/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ user: { username, password } })\n        })\n        .then(res => res.json())\n        .then(json => {\n            if (json && json.jwt) {\n                this.saveToken(json.jwt)\n                this.props.getUser()\n            }\n        })\n        .then(() => {\n    \t\t\tthis.props.history.push('/')\n    \t\t})\n    }\n\n\n    handleSubmit = (ev) => {\n      ev.preventDefault();\n      if (!ev.target.checkValidity() || this.state.confirm !== this.state.password) {\n        this.setState({ displayErrors: true });\n        return;\n      } else {\n        this.setState({ displayErrors: false });\n        this.props.onHide();\n        this.createUser(this.state);\n      }\n    }\n\n    handleChange = (ev) => {\n      this.setState({\n        [ev.target.id]: ev.target.value\n      })\n    }\n\n\n\n  render() {\n    const { displayErrors } = this.state;\n    return (\n      <Modal\n          {...this.props}\n          size=\"md\"\n          aria-labelledby=\"contained-modal-title-vcenter\"\n          centered\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n            Create Account\n          </Modal.Title>\n\n          </Modal.Header>\n          <Modal.Body>\n            <Form onSubmit={this.handleSubmit} className={displayErrors ? 'displayErrors' : ''} noValidate>\n            <Row>\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <InputGroup.Prepend>\n                    <InputGroup.Text id=\"basic-addon1\"> </InputGroup.Text>\n                  </InputGroup.Prepend>\n                  <FormControl\n                    type=\"text\" id=\"name\" placeholder=\"Name\" onChange={this.handleChange} required\n                  />\n                </InputGroup>\n              </Col>\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <InputGroup.Prepend>\n                    <InputGroup.Text id=\"basic-addon1\">@</InputGroup.Text>\n                  </InputGroup.Prepend>\n                  <FormControl\n                    type=\"text\" id=\"username\" placeholder=\"username\" required onChange={this.handleChange}\n                  />\n                </InputGroup>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <FormControl placeholder=\"Password\"\n                  type=\"password\" id=\"password\" onChange={this.handleChange} required />\n                </InputGroup>\n              </Col>\n\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <FormControl type=\"password\" id=\"confirm\" placeholder=\"Confirm\" onChange={this.handleChange} required />\n                </InputGroup>\n              </Col>\n            </Row>\n            <InputGroup className=\"mb-3\">\n              <FormControl id=\"address\" placeholder=\"Address\" onChange={this.handleChange} required />\n            </InputGroup>\n            <Row>\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <FormControl id=\"city\" placeholder=\"City\" onChange={this.handleChange} required />\n                </InputGroup>\n              </Col>\n\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <FormControl id=\"state\" placeholder=\"State\" onChange={this.handleChange} required />\n                </InputGroup>\n              </Col>\n\n              <Col>\n                <InputGroup className=\"mb-3\">\n                  <FormControl id=\"zip_code\" placeholder=\"Zip Code\" onChange={this.handleChange} required />\n                </InputGroup>\n              </Col>\n            </Row>\n\n\n              <Button type=\"submit\" className=\"modal-buttons\" onClick={this.handleClick}>Create Account</Button>\n            </Form>\n          </Modal.Body>\n        <Modal.Footer>\n\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default withRouter(SignupForm);\n"]},"metadata":{},"sourceType":"module"}